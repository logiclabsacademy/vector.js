<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solar System</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #000;
        }
        canvas {
            background-color: #fff;
        }
    </style>
</head>
<body>
    <canvas id="solar_system"></canvas>
    <script type="module">
    
    import '../src/vector.js';

        class Sphere {
    constructor(position, radius, color, nSegments = 50) {
        this.position = position;
        this.radius = radius;
        this.color = color;
        this.nSegments = nSegments;
    }

    draw(ctx, camera) {
        for (let i = 0; i < this.nSegments; i++) {
            const theta1 = i * 2 * Math.PI / this.nSegments;
            const theta2 = (i + 1) * 2 * Math.PI / this.nSegments;

            const x1 = this.position.x + this.radius * Math.cos(theta1);
            const y1 = this.position.y + this.radius * Math.sin(theta1);
            const z1 = this.position.z + this.radius * Math.sin(theta1);

            const x2 = this.position.x + this.radius * Math.cos(theta2);
            const y2 = this.position.y + this.radius * Math.sin(theta2);
            const z2 = this.position.z + this.radius * Math.sin(theta2);

            const p1 = Vector.Vec3.project(new Vector.Vec3(x1, y1, z1), camera);
            const p2 = Vector.Vec3.project(new Vector.Vec3(x2, y2, z2), camera);

            ctx.beginPath();
            ctx.moveTo(p1.x, p1.y);
            ctx.lineTo(p2.x, p2.y);
            ctx.strokeStyle = this.color;
            ctx.stroke();
            ctx.closePath();
        }
    }
}

class SolarSystem {
    constructor(canvasId) {
        this.canvas = document.getElementById(canvasId);
        this.ctx = this.canvas.getContext('2d');
        this.canvas.width = window.innerWidth;
        this.canvas.height = window.innerHeight;

        this.camera = {
            position: new Vector.Vec3(this.canvas.width / 2, this.canvas.height / 2, -100),
            orientation: new Vector.Vec3(0, 0, 1),
            up: new Vector.Vec3(0, 1, 0),
            distance: 100,
            fov: Math.PI / 4,
        };

        this.objects = [];
    }

    addObject(object) {
        this.objects.push(object);
    }

    update() {
        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
        for (let object of this.objects) {
            object.draw(this.ctx, this.camera);
        }
    }

    animate() {
        this.update();
        requestAnimationFrame(this.animate.bind(this));
    }
}
        const solarSystem = new SolarSystem('solar_system');

        const sun = new Sphere(new Vector.Vec3(solarSystem.canvas.width / 2, solarSystem.canvas.height / 2, 0), 50, 'yellow');
        const mercury = new Sphere(new Vector.Vec3(solarSystem.canvas.width / 2 + 100, solarSystem.canvas.height / 2, 0), 10, 'gray');
        const venus = new Sphere(new Vector.Vec3(solarSystem.canvas.width / 2 + 200, solarSystem.canvas.height / 2, 0), 20, 'orange');
        const earth = new Sphere(new Vector.Vec3(solarSystem.canvas.width / 2 + 300, solarSystem.canvas.height / 2, 0), 25, 'blue');
        const mars = new Sphere(new Vector.Vec3(solarSystem.canvas.width / 2 + 400, solarSystem.canvas.height / 2, 0), 15, 'red');

        solarSystem.addObject(sun);
        solarSystem.addObject(mercury);
        solarSystem.addObject(venus);
        solarSystem.addObject(earth);
        solarSystem.addObject(mars);

        window.addEventListener('resize', () => {
            solarSystem.canvas.width = window.innerWidth;
            solarSystem.canvas.height = window.innerHeight;
        });

        window.addEventListener('load', () => {
            solarSystem.animate();
        });
    </script>
</body>
</html>
